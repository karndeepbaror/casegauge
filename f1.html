<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber-X Titan | Emerald Neon Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Fira+Code:wght@400;600&display=swap');
        
        :root {
            --neon-emerald: #10b981;
            --deep-navy: #020617;
            --border-glow: rgba(16, 185, 129, 0.2);
        }

        body { 
            font-family: 'Space Grotesk', sans-serif; 
            background-color: var(--deep-navy); 
            color: #ecf0f1;
            background-image: 
                linear-gradient(rgba(16, 185, 129, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(16, 185, 129, 0.02) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        .mono { font-family: 'Fira Code', monospace; }
        
        .premium-card { 
            background: rgba(15, 23, 42, 0.8); 
            backdrop-filter: blur(25px); 
            border: 1px solid rgba(16, 185, 129, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .emerald-glow { border: 1px solid var(--neon-emerald); box-shadow: 0 0 20px var(--border-glow); }
        .tab-active { color: var(--neon-emerald); border-bottom: 3px solid var(--neon-emerald); background: rgba(16, 185, 129, 0.05); }
        
        input, select, textarea {
            background: rgba(30, 41, 59, 0.5) !important;
            border: 1px solid rgba(16, 185, 129, 0.2) !important;
            color: white !important;
            transition: all 0.3s ease;
        }
        input:focus { border-color: var(--neon-emerald) !important; outline: none; box-shadow: 0 0 15px var(--border-glow); }
        
        .terminal-feed { color: var(--neon-emerald); opacity: 0.9; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--neon-emerald); border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen">

    <nav class="border-b border-emerald-500/20 px-8 py-4 flex justify-between items-center bg-slate-950/80 backdrop-blur-xl sticky top-0 z-[100]">
        <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-emerald-600 rounded-lg flex items-center justify-center shadow-[0_0_20px_rgba(16,185,129,0.4)]">
                <i class="bi bi-shield-lock text-white text-2xl"></i>
            </div>
            <div>
                <h1 class="font-bold text-xl tracking-tight text-white italic uppercase">Cyber-X <span class="text-emerald-400">Titan</span></h1>
                <p class="text-[9px] text-emerald-500/60 font-mono tracking-widest uppercase">Emerald Ops v4.0</p>
            </div>
        </div>
        <div id="live-time" class="text-emerald-400 text-sm bg-emerald-500/5 px-4 py-1 rounded border border-emerald-500/20 font-mono">00:00:00</div>
    </nav>

    <main class="max-w-7xl mx-auto mt-10 px-6 grid grid-cols-12 gap-8 mb-20">
        
        <div class="col-span-12 lg:col-span-8 space-y-6">
            
            <div class="premium-card p-1 flex rounded-xl mb-2 overflow-hidden border border-emerald-500/10 font-mono">
                <button onclick="navStep(1)" id="b1" class="flex-1 py-4 text-[10px] font-bold tracking-widest tab-active">PROFILING</button>
                <button onclick="navStep(2)" id="b2" class="flex-1 py-4 text-[10px] font-bold tracking-widest">FINANCIALS</button>
                <button onclick="navStep(3)" id="b3" class="flex-1 py-4 text-[10px] font-bold tracking-widest">EVIDENCE</button>
                <button onclick="navStep(4)" id="b4" class="flex-1 py-4 text-[10px] font-bold tracking-widest">INTEGRITY</button>
            </div>

            <div id="s1" class="step-div premium-card p-8 rounded-2xl animate__animated animate__fadeIn">
                <h3 class="text-lg font-bold text-emerald-400 mb-8 flex items-center gap-3 uppercase tracking-wider underline underline-offset-8">User Profiling</h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <label class="text-[11px] font-bold text-gray-500 uppercase mb-3 block">Victim Full Name</label>
                        <input type="text" id="name" placeholder="Legal Identity" class="w-full p-4 rounded text-sm">
                    </div>
                    <div>
                        <label class="text-[11px] font-bold text-gray-500 uppercase mb-3 block">Fraud Category</label>
                        <select id="modus" class="w-full p-4 rounded text-sm" onchange="runEngine()">
                            <option value="0">Select Category</option>
                            <option value="25">UPI / Banking / Phishing</option>
                            <option value="20">Social Identity Theft</option>
                            <option value="30">High-Stake Investment Scam</option>
                            <option value="35">Sextortion / Blackmail</option>
                        </select>
                    </div>
                    <div class="col-span-2">
                        <label class="text-[11px] font-bold text-gray-500 uppercase mb-3 block">Incident Summary</label>
                        <textarea id="summary" rows="3" class="w-full p-4 rounded text-sm" placeholder="Detailed sequence of events..."></textarea>
                    </div>
                </div>
            </div>

            <div id="s2" class="step-div hidden premium-card p-8 rounded-2xl animate__animated animate__fadeIn">
                <h3 class="text-lg font-bold text-emerald-400 mb-8 flex items-center gap-3 uppercase tracking-wider underline underline-offset-8">Financial Trail</h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <label class="text-[11px] font-bold text-gray-500 uppercase mb-3 block">Loss Amount (INR)</label>
                        <input type="number" id="amt" class="w-full p-4 rounded text-sm" placeholder="0.00">
                    </div>
                    <div>
                        <label class="text-[11px] font-bold text-gray-500 uppercase mb-3 block">UTR / Transaction ID</label>
                        <input type="text" id="utr" class="w-full p-4 rounded text-sm" placeholder="Ref Number">
                    </div>
                    <div class="col-span-2">
                        <label class="text-[11px] font-bold text-gray-500 uppercase mb-3 block">Suspect Detail (UPI/Account)</label>
                        <input type="text" id="suspect_id" class="w-full p-4 rounded text-sm" placeholder="Fraudster Handle" oninput="runEngine()">
                    </div>
                </div>
            </div>

            <div id="s3" class="step-div hidden premium-card p-8 rounded-2xl animate__animated animate__fadeIn">
                <h3 class="text-lg font-bold text-emerald-400 mb-8 flex items-center gap-3 uppercase tracking-wider underline underline-offset-8">Digital Evidence Vault</h3>
                <div class="space-y-4">
                    <label class="flex items-center justify-between p-5 bg-emerald-500/5 rounded border border-emerald-500/10 cursor-pointer hover:bg-emerald-500/10">
                        <span class="font-bold text-sm">Official Bank Statement</span>
                        <input type="checkbox" class="ev-check w-6 h-6 accent-emerald-500" data-pts="20" data-label="Bank Statement" onchange="runEngine()">
                    </label>
                    <label class="flex items-center justify-between p-5 bg-emerald-500/5 rounded border border-emerald-500/10 cursor-pointer hover:bg-emerald-500/10">
                        <span class="font-bold text-sm">Chat Exports / Logs</span>
                        <input type="checkbox" class="ev-check w-6 h-6 accent-emerald-500" data-pts="15" data-label="Chat Logs" onchange="runEngine()">
                    </label>
                    <label class="flex items-center justify-between p-5 bg-emerald-500/5 rounded border border-emerald-500/10 cursor-pointer hover:bg-emerald-500/10">
                        <span class="font-bold text-sm">Fraudulent Links/Apps</span>
                        <input type="checkbox" class="ev-check w-6 h-6 accent-emerald-500" data-pts="10" data-label="URL/App Proof" onchange="runEngine()">
                    </label>
                </div>
            </div>

            <div id="s4" class="step-div hidden premium-card p-8 rounded-2xl animate__animated animate__fadeIn">
                <h3 class="text-lg font-bold text-emerald-400 mb-8 flex items-center gap-3 uppercase tracking-wider underline underline-offset-8">Final Validation</h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="p-6 bg-red-500/5 border border-red-500/20 rounded">
                        <p class="text-[11px] font-bold text-red-500 mb-4 uppercase">Forensic Red-Flags</p>
                        <label class="flex items-center gap-3 text-xs mb-3">
                            <input type="checkbox" class="p-check" data-val="35" data-label="Device Factory Reset" onchange="runEngine()"> Device Factory Reset
                        </label>
                        <label class="flex items-center gap-3 text-xs">
                            <input type="checkbox" class="p-check" data-val="20" data-label="Edited Proofs" onchange="runEngine()"> Cropped Screenshots
                        </label>
                    </div>
                    <div class="p-6 bg-emerald-500/5 border border-emerald-500/20 rounded">
                        <p class="text-[11px] font-bold text-emerald-400 mb-4 uppercase">Reporting Delay</p>
                        <input type="range" id="t_gap" min="1" max="100" value="1" oninput="runEngine()" class="w-full accent-emerald-500">
                        <p id="t_label" class="text-[10px] mt-4 font-mono text-emerald-500">Golden Hour Active (0-24h)</p>
                    </div>
                </div>
                <button onclick="downloadReport()" class="w-full mt-10 py-5 bg-emerald-600 hover:bg-emerald-500 text-white font-bold text-sm rounded transition-all shadow-lg shadow-emerald-500/20 uppercase tracking-widest">
                    Generate Forensic Dossier
                </button>
            </div>
        </div>

        <div class="col-span-12 lg:col-span-4 space-y-6">
            <div class="premium-card p-10 rounded-2xl sticky top-28 border border-emerald-500/20 emerald-glow">
                <div class="text-center mb-10">
                    <p class="text-[10px] font-mono text-emerald-500 uppercase tracking-widest mb-2">Confidence Matrix</p>
                    <div id="big-score" class="text-8xl font-black text-white tracking-tighter mono">00</div>
                    <div id="grade" class="text-[10px] font-bold mt-4 text-emerald-400 border border-emerald-400/30 px-4 py-1 rounded-full uppercase mono">Syncing...</div>
                </div>
                <div id="term" class="text-[9px] font-mono text-emerald-500/60 leading-relaxed h-32 overflow-y-auto border-t border-emerald-500/10 pt-4">
                    [SYSTEM]: Emerald-Titan Core Online...
                </div>
            </div>
        </div>
    </main>

    <footer class="mt-20 border-t border-emerald-500/10 py-10 text-center">
        <p class="text-gray-600 text-[10px] tracking-widest font-mono uppercase">© 2025 CYBER-X TITAN | ALL RIGHTS RESERVED</p>
        <p class="text-emerald-500/40 text-[10px] mt-2 uppercase font-bold tracking-tighter">Developed with ❤️ by <span class="text-emerald-500 italic">Gemini Pro</span></p>
    </footer>

    <script>
        setInterval(() => { document.getElementById('live-time').innerText = new Date().toLocaleTimeString('en-GB'); }, 1000);

        function navStep(n) {
            document.querySelectorAll('.step-div').forEach(s => s.classList.add('hidden'));
            for(let i=1; i<=4; i++) document.getElementById('b'+i).classList.remove('tab-active');
            document.getElementById('s' + n).classList.remove('hidden');
            document.getElementById('b' + n).classList.add('tab-active');
        }

        function runEngine() {
            let score = 0;
            score += parseInt(document.getElementById('modus').value);
            document.querySelectorAll('.ev-check:checked').forEach(c => { score += parseInt(c.dataset.pts); });
            if(document.getElementById('suspect_id').value.length > 3) score += 15;
            
            const t = document.getElementById('t_gap').value;
            let bonus = 20;
            if(t > 30) { bonus = 10; document.getElementById('t_label').innerText = "Phase II: Delay Detected"; }
            if(t > 70) { bonus = 3; document.getElementById('t_label').innerText = "Phase III: Critical Delay"; }
            score += bonus;
            
            document.querySelectorAll('.p-check:checked').forEach(p => { score -= parseInt(p.dataset.val); });
            score = Math.max(0, Math.min(100, score));
            document.getElementById('big-score').innerText = score.toString().padStart(2, '0');
            
            let g = score > 70 ? "High Priority" : (score > 40 ? "Actionable" : "Insufficient");
            document.getElementById('grade').innerText = g;
            logTerminal(`Matrix Updated: Score ${score}%`);
        }

        function logTerminal(msg) {
            const t = document.getElementById('term');
            t.innerHTML += `<br>> [SCN]: ${msg}`;
            t.scrollTop = t.scrollHeight;
        }

        async function downloadReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const score = document.getElementById('big-score').innerText;
            const status = document.getElementById('grade').innerText;

            doc.setFillColor(2, 6, 23);
            doc.rect(0, 0, 210, 45, 'F');
            doc.setTextColor(16, 185, 129);
            doc.setFontSize(22);
            doc.text("CYBER-X TITAN: FORENSIC REPORT", 20, 28);
            
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text(`CONFIDENCE SCORE: ${score}/100`, 140, 22);
            doc.text(`PRIORITY: ${status.toUpperCase()}`, 140, 30);

            const evList = [];
            document.querySelectorAll('.ev-check:checked').forEach(e => evList.push(e.dataset.label));
            const penaltyList = [];
            document.querySelectorAll('.p-check:checked').forEach(p => penaltyList.push(p.dataset.label));

            const tableData = [
                ["Victim Identifier", document.getElementById('name').value || "ANONYMOUS"],
                ["Incident Category", document.getElementById('modus').options[document.getElementById('modus').selectedIndex].text],
                ["Financial Impact", `INR ${document.getElementById('amt').value || '0'}`],
                ["Txn Reference ID", document.getElementById('utr').value || "NOT_PROVIDED"],
                ["Suspect Alias", document.getElementById('suspect_id').value || "UNKNOWN"],
                ["Reporting Window", document.getElementById('t_label').innerText],
                ["Evidence Logs", evList.join(", ") || "No Logs Provided"],
                ["Forensic Violations", penaltyList.join(", ") || "None Detected"]
            ];

            doc.autoTable({
                startY: 55,
                head: [['INVESTIGATION_FIELD', 'DATA_INTEGRITY_CHECK']],
                body: tableData,
                theme: 'striped',
                headStyles: { fillColor: [16, 185, 129], textColor: [255, 255, 255] },
                styles: { fontSize: 9 }
            });

            const finalY = doc.lastAutoTable.finalY + 10;
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            doc.text("INCIDENT NARRATIVE:", 20, finalY);
            doc.setFontSize(9);
            const splitSummary = doc.splitTextToSize(document.getElementById('summary').value || "No detailed summary provided.", 170);
            doc.text(splitSummary, 20, finalY + 7);

            doc.setFontSize(8);
            doc.setTextColor(150, 150, 150);
            doc.text("Cyber-X Titan Forensic Logic - Legal Compliance Reference Sec 65B IEA.", 20, 285);
            
            doc.save(`TITAN_FORENSIC_${Date.now()}.pdf`);
        }
    </script>
</body>
</html>
